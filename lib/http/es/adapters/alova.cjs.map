{"version":3,"file":"alova.cjs","sources":["../../../../../http/es/adapters/alova.js"],"sourcesContent":["import{BaseAdapter as e}from\"./base.js\";class t extends e{constructor(e){if(super(),this.name=\"alova\",this.alovaInstance=e,!e)try{this.alova=require(\"alova\")}catch{this.alova=null}}isSupported(){return null!==this.alovaInstance||null!==this.alova}async request(e){if(!this.isSupported())throw new Error(\"Alova is not available. Please install alova: npm install alova\");const t=this.processConfig(e);try{const e=this.alovaInstance||this.createDefaultAlovaInstance(),a=await this.createAlovaMethod(e,t).send();return this.convertFromAlovaResponse(a,t)}catch(e){throw this.handleAlovaError(e,t)}}createDefaultAlovaInstance(){if(!this.alova)throw new Error(\"Alova is not available\");try{const{createAlova:e}=this.alova;let t;try{t=require(\"alova/fetch\"),\"object\"==typeof t&&t.default&&(t=t.default)}catch{t=()=>(e,t)=>fetch(e,t)}return e({baseURL:\"\",requestAdapter:t(),responded:e=>e.json()})}catch(e){throw new Error(`Failed to create Alova instance: ${e}`)}}createAlovaMethod(e,t){const{url:a,method:r=\"GET\",data:s,headers:o,timeout:n,params:l}=t;if(!a)throw new Error(\"URL is required\");let c=a;const i=l||{},h=a.split(\"?\");if(h.length>1){c=h[0];const e=h[1];new URLSearchParams(e).forEach((e,t)=>{const a=Number(e);i[t]=Number.isNaN(a)||\"\"===e?e:a})}let u=c;!c.startsWith(\"http\")&&!c.startsWith(\"//\")&&t.baseURL&&(u=`${t.baseURL.replace(/\\/$/,\"\")}/${c.replace(/^\\//,\"\")}`);const p={headers:o,timeout:n};let v;i&&Object.keys(i).length>0&&(p.params=i),t.signal&&(p.signal=t.signal);try{switch(r.toUpperCase()){case\"GET\":v=e.Get(u,p);break;case\"POST\":v=e.Post(u,s,p);break;case\"PUT\":v=e.Put(u,s,p);break;case\"DELETE\":v=e.Delete(u,p);break;case\"PATCH\":v=e.Patch(u,s,p);break;case\"HEAD\":v=e.Head(u,p);break;case\"OPTIONS\":v=e.Options(u,p);break;default:throw new Error(`Unsupported HTTP method: ${r}`)}}catch(e){throw new Error(`Failed to parse URL from ${a}: ${e.message}`)}return t.signal&&(v.abort=()=>{t.signal&&!t.signal.aborted&&t.signal.abort()}),v}convertFromAlovaResponse(e,t){return this.processResponse(e,200,\"OK\",{},t,e)}handleAlovaError(e,t){if(e.status||e.response?.status){const a=e.status||e.response.status,r=`Request failed with status code ${a}`,s=this.processError(new Error(r),t,e.response);return s.status=a,s}if(\"AlovaError\"===e.name)return this.processError(e,t);const a=this.processError(e,t);return e.message&&e.message.includes(\"fetch\")&&(a.isNetworkError=!0),a}}export{t as AlovaAdapter};\n//# sourceMappingURL=alova.js.map\n"],"names":["e","t","a"],"mappings":";;;;;;;;;;;;;AAAwC,MAAM,UAAUA,gBAAA,CAAC;AAAA,EAAC,YAAYA,EAAAA,EAAE;AAAC,IAAA,IAAG,KAAA,EAAM,EAAE,IAAA,CAAK,IAAA,GAAK,OAAA,EAAQ,KAAK,aAAA,GAAcA,EAAAA,EAAE,CAACA,EAAAA,EAAE,IAAG;AAAC,MAAA,IAAA,CAAK,KAAA,GAAM,QAAQ,OAAO,CAAA;AAAA,IAAC,CAAA,CAAA,MAAM;AAAC,MAAA,IAAA,CAAK,KAAA,GAAM,IAAA;AAAA,IAAI;AAAA,EAAC;AAAA,EAAC,WAAA,GAAa;AAAC,IAAA,OAAO,IAAA,KAAO,IAAA,CAAK,aAAA,IAAe,IAAA,KAAO,IAAA,CAAK,KAAA;AAAA,EAAK;AAAA,EAAC,MAAM,QAAQA,EAAAA,EAAE;AAAC,IAAA,IAAG,CAAC,IAAA,CAAK,WAAA,IAAc,MAAM,IAAI,MAAM,iEAAiE,CAAA;AAAE,IAAA,MAAMC,EAAAA,GAAE,IAAA,CAAK,aAAA,CAAcD,EAAC,CAAA;AAAE,IAAA,IAAG;AAAC,MAAA,MAAMA,EAAAA,GAAE,IAAA,CAAK,aAAA,IAAe,IAAA,CAAK,0BAAA,EAA2B,EAAE,CAAA,GAAE,MAAM,IAAA,CAAK,iBAAA,CAAkBA,EAAAA,EAAEC,EAAC,EAAE,IAAA,EAAK;AAAE,MAAA,OAAO,IAAA,CAAK,wBAAA,CAAyB,CAAA,EAAEA,EAAC,CAAA;AAAA,IAAC,SAAOD,EAAAA,EAAE;AAAC,MAAA,MAAM,IAAA,CAAK,gBAAA,CAAiBA,EAAAA,EAAEC,EAAC,CAAA;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,0BAAA,GAA4B;AAAC,IAAA,IAAG,CAAC,IAAA,CAAK,KAAA,EAAM,MAAM,IAAI,MAAM,wBAAwB,CAAA;AAAE,IAAA,IAAG;AAAC,MAAA,MAAK,EAAC,WAAA,EAAYD,EAAAA,EAAC,GAAE,IAAA,CAAK,KAAA;AAAM,MAAA,IAAIC,EAAAA;AAAE,MAAA,IAAG;AAAC,QAAAA,EAAAA,GAAE,OAAA,CAAQ,aAAa,CAAA,EAAE,QAAA,IAAU,OAAOA,EAAAA,IAAGA,EAAAA,CAAE,OAAA,KAAUA,EAAAA,GAAEA,EAAAA,CAAE,OAAA,CAAA;AAAA,MAAQ,CAAA,CAAA,MAAM;AAAC,QAAAA,KAAE,MAAI,CAACD,IAAEC,EAAAA,KAAI,KAAA,CAAMD,IAAEC,EAAC,CAAA;AAAA,MAAC;AAAC,MAAA,OAAOD,EAAAA,CAAE,EAAC,OAAA,EAAQ,EAAA,EAAG,cAAA,EAAeC,EAAAA,EAAE,EAAE,SAAA,EAAU,CAAAD,EAAAA,KAAGA,EAAAA,CAAE,IAAA,IAAO,CAAA;AAAA,IAAC,SAAOA,EAAAA,EAAE;AAAC,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,iCAAA,EAAoCA,EAAC,CAAA,CAAE,CAAA;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,iBAAA,CAAkBA,IAAEC,EAAAA,EAAE;AAAC,IAAA,MAAK,EAAC,GAAA,EAAI,CAAA,EAAE,MAAA,EAAO,IAAE,KAAA,EAAM,IAAA,EAAK,CAAA,EAAE,OAAA,EAAQ,CAAA,EAAE,OAAA,EAAQ,CAAA,EAAE,MAAA,EAAO,GAAC,GAAEA,EAAAA;AAAE,IAAA,IAAG,CAAC,CAAA,EAAE,MAAM,IAAI,MAAM,iBAAiB,CAAA;AAAE,IAAA,IAAI,CAAA,GAAE,CAAA;AAAE,IAAA,MAAM,IAAE,CAAA,IAAG,IAAG,CAAA,GAAE,CAAA,CAAE,MAAM,GAAG,CAAA;AAAE,IAAA,IAAG,CAAA,CAAE,SAAO,CAAA,EAAE;AAAC,MAAA,CAAA,GAAE,EAAE,CAAC,CAAA;AAAE,MAAA,MAAMD,EAAAA,GAAE,EAAE,CAAC,CAAA;AAAE,MAAA,IAAI,gBAAgBA,EAAC,CAAA,CAAE,OAAA,CAAQ,CAACA,IAAEC,EAAAA,KAAI;AAAC,QAAA,MAAMC,EAAAA,GAAE,OAAOF,EAAC,CAAA;AAAE,QAAA,CAAA,CAAEC,EAAC,IAAE,MAAA,CAAO,KAAA,CAAMC,EAAC,CAAA,IAAG,EAAA,KAAKF,KAAEA,EAAAA,GAAEE,EAAAA;AAAA,MAAC,CAAC,CAAA;AAAA,IAAC;AAAC,IAAA,IAAI,CAAA,GAAE,CAAA;AAAE,IAAA,CAAC,CAAA,CAAE,UAAA,CAAW,MAAM,CAAA,IAAG,CAAC,EAAE,UAAA,CAAW,IAAI,CAAA,IAAGD,EAAAA,CAAE,OAAA,KAAU,CAAA,GAAE,GAAGA,EAAAA,CAAE,OAAA,CAAQ,OAAA,CAAQ,KAAA,EAAM,EAAE,CAAC,IAAI,CAAA,CAAE,OAAA,CAAQ,KAAA,EAAM,EAAE,CAAC,CAAA,CAAA,CAAA;AAAI,IAAA,MAAM,CAAA,GAAE,EAAC,OAAA,EAAQ,CAAA,EAAE,SAAQ,CAAA,EAAC;AAAE,IAAA,IAAI,CAAA;AAAE,IAAA,CAAA,IAAG,MAAA,CAAO,IAAA,CAAK,CAAC,CAAA,CAAE,MAAA,GAAO,CAAA,KAAI,CAAA,CAAE,MAAA,GAAO,CAAA,CAAA,EAAGA,EAAAA,CAAE,MAAA,KAAS,CAAA,CAAE,SAAOA,EAAAA,CAAE,MAAA,CAAA;AAAQ,IAAA,IAAG;AAAC,MAAA,QAAO,CAAA,CAAE,aAAY;AAAE,QAAC,KAAI,KAAA;AAAM,UAAA,CAAA,GAAED,EAAAA,CAAE,GAAA,CAAI,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,MAAA;AAAO,UAAA,CAAA,GAAEA,EAAAA,CAAE,IAAA,CAAK,CAAA,EAAE,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,KAAA;AAAM,UAAA,CAAA,GAAEA,EAAAA,CAAE,GAAA,CAAI,CAAA,EAAE,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,QAAA;AAAS,UAAA,CAAA,GAAEA,EAAAA,CAAE,MAAA,CAAO,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,OAAA;AAAQ,UAAA,CAAA,GAAEA,EAAAA,CAAE,KAAA,CAAM,CAAA,EAAE,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,MAAA;AAAO,UAAA,CAAA,GAAEA,EAAAA,CAAE,IAAA,CAAK,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM,KAAI,SAAA;AAAU,UAAA,CAAA,GAAEA,EAAAA,CAAE,OAAA,CAAQ,CAAA,EAAE,CAAC,CAAA;AAAE,UAAA;AAAA,QAAM;AAAQ,UAAA,MAAM,IAAI,KAAA,CAAM,CAAA,yBAAA,EAA4B,CAAC,CAAA,CAAE,CAAA;AAAA;AAAC,IAAC,SAAOA,EAAAA,EAAE;AAAC,MAAA,MAAM,IAAI,KAAA,CAAM,CAAA,yBAAA,EAA4B,CAAC,CAAA,EAAA,EAAKA,EAAAA,CAAE,OAAO,CAAA,CAAE,CAAA;AAAA,IAAC;AAAC,IAAA,OAAOC,EAAAA,CAAE,MAAA,KAAS,CAAA,CAAE,KAAA,GAAM,MAAI;AAAC,MAAAA,EAAAA,CAAE,UAAQ,CAACA,EAAAA,CAAE,OAAO,OAAA,IAASA,EAAAA,CAAE,OAAO,KAAA,EAAM;AAAA,IAAC,CAAA,CAAA,EAAG,CAAA;AAAA,EAAC;AAAA,EAAC,wBAAA,CAAyBD,IAAEC,EAAAA,EAAE;AAAC,IAAA,OAAO,IAAA,CAAK,gBAAgBD,EAAAA,EAAE,GAAA,EAAI,MAAK,EAAC,EAAEC,IAAED,EAAC,CAAA;AAAA,EAAC;AAAA,EAAC,gBAAA,CAAiBA,IAAEC,EAAAA,EAAE;AAAC,IAAA,IAAGD,EAAAA,CAAE,MAAA,IAAQA,EAAAA,CAAE,QAAA,EAAU,MAAA,EAAO;AAAC,MAAA,MAAME,KAAEF,EAAAA,CAAE,MAAA,IAAQA,GAAE,QAAA,CAAS,MAAA,EAAO,IAAE,CAAA,gCAAA,EAAmCE,EAAC,IAAG,CAAA,GAAE,IAAA,CAAK,aAAa,IAAI,KAAA,CAAM,CAAC,CAAA,EAAED,EAAAA,EAAED,GAAE,QAAQ,CAAA;AAAE,MAAA,OAAO,CAAA,CAAE,SAAOE,EAAAA,EAAE,CAAA;AAAA,IAAC;AAAC,IAAA,IAAG,iBAAeF,EAAAA,CAAE,IAAA,SAAY,IAAA,CAAK,YAAA,CAAaA,IAAEC,EAAC,CAAA;AAAE,IAAA,MAAM,CAAA,GAAE,IAAA,CAAK,YAAA,CAAaD,EAAAA,EAAEC,EAAC,CAAA;AAAE,IAAA,OAAOD,EAAAA,CAAE,WAASA,EAAAA,CAAE,OAAA,CAAQ,SAAS,OAAO,CAAA,KAAI,CAAA,CAAE,cAAA,GAAe,IAAA,CAAA,EAAI,CAAA;AAAA,EAAC;AAAC;;;;;;;"}